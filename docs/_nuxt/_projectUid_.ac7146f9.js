import{a as M,f as _,h as e,u as s,F as r,i as p,t as n,B as U,y as k,o as i,p as w,k as H,l as L,r as f,b as R,x as F,C as B,e as D,z as N,j as u,c as C,q as j,A as O}from"./entry.a618075d.js";import{a as T,_ as z,g as q}from"./goToProject.7781cda4.js";import{c as A}from"./getDataFromHemApi.9a636db2.js";function E(c){return c.replace(/\*(.*?)\*/g,"<em>$1</em>")}const y=c=>(w("data-v-83e24270"),c=c(),H(),c),V={class:"fp-grid-coll-container"},I={class:"fp-grid-coll-12-24"},J={class:"v-app-header__left"},Z=["innerHTML"],G={class:"v-app-header__title"},K=y(()=>e("div",null,[e("h5",null,"Responsable")],-1)),Q=y(()=>e("div",{class:"v-app-header__partners"},[e("div",null,[e("h5",null,"Partenaires")]),e("div",null,[e("p",null,"Jean-Christophe Revel, CRR Paris"),e("p",null,"Mathieu Ferey , CNSM Lyon"),e("p",null,"Pierre Bornachot , Centre Culturel d’Ambronay"),e("p",null,"Nicolas Bucher, Centre de Musique Baroque de Versailles")])],-1)),W={class:"v-app-header__date"},X=y(()=>e("div",null,[e("h5",null,"Période")],-1)),Y={class:"fp-grid-coll-12-24"},ee=M({__name:"appHeader",props:{title:{},axesUid:{},responsables:{},date:{},cover:{}},setup(c){return(t,h)=>(i(),_("header",{class:k(["v-app-header",[s(T)(t.axesUid)]])},[e("div",V,[e("div",I,[e("div",J,[e("h1",{class:"",innerHTML:s(E)(t.title)},null,8,Z),e("div",null,[e("div",G,[K,e("div",null,[(i(!0),_(r,null,p(t.responsables,v=>(i(),_("p",null,n(v.firstname),1))),256))])]),Q,e("div",W,[X,e("div",null,n(t.date),1)])])])]),e("div",Y,[e("div",{class:"v-app-header__right",style:U({backgroundImage:`url(${t.cover})`})},null,4)])])],2))}});const te=L(ee,[["__scopeId","data-v-83e24270"]]),a=c=>(w("data-v-71fb08ef"),c=c(),H(),c),se={key:0,class:"v--project-uid__header"},ie=a(()=>e("h1",{style:{color:"white"}}," chargement… ",-1)),_e=[ie],oe={key:1,style:{color:"white"}},ne={class:"v--project-uid__header"},ce={class:"fp-grid-coll-container fp-grid-coll-container--center"},le=a(()=>e("div",{class:"fp-grid-coll-16-24"},[e("h2",null,"Résumé")],-1)),ae={class:"fp-grid-coll-16-24"},re=["innerHTML"],de={key:1,class:"v--project-uid__content__img"},ue=["alt","src"],pe={key:2,class:"v--project-uid__content__video"},ve=["src"],he={key:0,class:"v--project-uid__details"},me={class:"fp-grid-coll-container fp-grid-coll-container--center"},fe={class:"fp-grid-coll-20-24 hem-rm-margins"},ge=a(()=>e("h2",null,"Fiche technique du projet",-1)),je={class:"v--project-uid__details__item"},ye=a(()=>e("div",{class:"v--project-uid__details__item__title"}," Responsable ",-1)),be={class:"v--project-uid__details__item__content"},xe={class:"v--project-uid__details__item"},Ce=a(()=>e("div",{class:"v--project-uid__details__item__title"}," Partenaire ",-1)),Me={class:"v--project-uid__details__item__content"},ke=["innerHTML"],we={class:"v--project-uid__details__item"},He=a(()=>e("div",{class:"v--project-uid__details__item__title"}," Équipe ",-1)),Le={class:"v--project-uid__details__item__content"},Te=["innerHTML"],$e={class:"v--project-uid__details__item"},Pe=a(()=>e("div",{class:"v--project-uid__details__item__title"}," Période ",-1)),Se={class:"v--project-uid__details__item__content"},Ue={class:"v--project-uid__details__item"},Re=a(()=>e("div",{class:"v--project-uid__details__item__title"}," Financement ",-1)),Fe={class:"v--project-uid__details__item__content"},Be=["innerHTML"],De={class:"v--project-uid__details__item"},Ne=a(()=>e("div",{class:"v--project-uid__details__item__title"}," Thèmes ",-1)),Oe={class:"v--project-uid__details__item__content v--project-uid__details__item__content--is-list"},ze={key:1,class:"v--project-uid__filesChapter-box"},qe={class:"fp-grid-coll-container fp-grid-coll-container--center"},Ae={class:"fp-grid-coll-20-24"},Ee={class:"hem-rm-margins v--project-uid__filesChapter-box__chapter"},Ve={class:"v--project-uid__filesChapter-box__chapter__title"},Ie=["innerHTML"],Je={class:"fp-grid-coll-container v--project-uid__filesChapter-box__chapter__files"},Ze={class:"v--project-uid__filesChapter-box__chapter__files__coll"},Ge={class:"v--project-uid__filesChapter-box__chapter__files__item"},Ke={class:"v--project-uid__filesChapter-box__chapter__files__item__name"},Qe=a(()=>e("br",null,null,-1)),We=a(()=>e("button",null,"télécharger",-1)),Xe={class:"v--project-uid__connected"},Ye={class:"v--project-uid__connected__item"},et={class:"v--project-uid__end-page"},tt=M({__name:"[projectUid]",setup(c){const t=f(null),h=f(null),v=f(),b=f(!1);R(()=>{F(()=>{if(!(v.value instanceof HTMLElement))return;new IntersectionObserver(l=>{l.forEach(g=>{b.value&&g.isIntersecting&&B().go(-1)})}).observe(v.value)}),$().then(()=>b.value=!0)});async function $(){const d=D().params.projectUid;if(typeof d=="string"){const l=await A(d);"error"in l?h.value=l.error:t.value=l}}function P(d){const l=d.match(/[?&]v=([a-zA-Z0-9_-]+)/);return l?l[1]:null}return(d,l)=>{var x;const g=O,S=z;return i(),_("section",{class:k(["v--project-uid",[s(T)(((x=s(t))==null?void 0:x.axes[0].uid)||"interpretation-historique")]])},[s(t)===null?(i(),_("div",se,_e)):s(h)?(i(),_("h1",oe,n(s(h)),1)):(i(),_(r,{key:2},[e("div",ne,[N(te,{axesUid:s(t).axes[0].uid,date:`${new Date(s(t).dateStart).toLocaleString("FR-fr",{month:"long",year:"numeric"})} - ${new Date(s(t).dateEnd).toLocaleString("FR-fr",{month:"long",year:"numeric"})}`,responsables:s(t).authors,title:s(t).title,cover:Object.values(s(t).cover)[0].resize.large},null,8,["axesUid","date","responsables","title","cover"])]),e("div",ce,[le,e("div",ae,[(i(!0),_(r,null,p(s(t).content,o=>(i(),_(r,null,[o.type==="text"?(i(),_("div",{key:0,class:"v--project-uid__content__text hem-rm-margins",innerHTML:o.value},null,8,re)):u("",!0),o.type==="image"?(i(),_("div",de,[e("img",{alt:o.alt,src:o.image.resize.small},null,8,ue),e("h6",null,n(o.caption),1)])):u("",!0),o.type==="video"?(i(),_("div",pe,[e("iframe",{width:"1280",height:"800",src:`https://www.youtube.com/embed/${P(o.content.url)}`,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,ve),e("h6",null,n(o.content.caption),1)])):u("",!0)],64))),256))])]),s(t)?(i(),_("div",he,[e("div",me,[e("div",fe,[ge,e("div",je,[ye,e("div",be,[(i(!0),_(r,null,p(s(t).authors,o=>(i(),_(r,null,[j(n(o.firstname)+" "+n(o.Name)+", ",1)],64))),256))])]),e("div",xe,[Ce,e("div",Me,[e("div",{innerHTML:s(t).partners},null,8,ke)])]),e("div",we,[He,e("div",Le,[e("div",{innerHTML:s(t).team},null,8,Te)])]),e("div",$e,[Pe,e("div",Se,n(new Date(s(t).dateStart).toLocaleString("FR-fr",{month:"long",year:"numeric"}))+" - "+n(new Date(s(t).dateEnd).toLocaleString("FR-fr",{month:"long",year:"numeric"})),1)]),e("div",Ue,[Re,e("div",Fe,[e("div",{innerHTML:s(t).financement},null,8,Be)])]),e("div",De,[Ne,e("div",Oe,[(i(!0),_(r,null,p(s(t).themes,o=>(i(),C(g,{name:o.title,"is-active":!1},null,8,["name"]))),256))])])])])])):u("",!0),s(t)?(i(),_("div",ze,[e("div",qe,[e("div",Ae,[(i(!0),_(r,null,p(s(t).filesChapters,o=>(i(),_("div",Ee,[e("h2",Ve,n(o.title),1),e("div",{innerHTML:o.textDescription},null,8,Ie),e("div",Je,[(i(!0),_(r,null,p(o.files,m=>(i(),_("div",Ze,[e("div",Ge,[e("div",null,[e("div",Ke,n(m.name),1),e("div",null,[j(n(m.extension)+" ",1),Qe,j("("+n(m.niceSize)+") ",1)])]),e("div",null,[e("div",null,n(m.type),1),We])])]))),256))])]))),256))])])])):u("",!0),e("div",Xe,[e("div",Ye,[s(t)?(i(),C(S,{key:0,"project-info":s(t),onCartelClicked:l[0]||(l[0]=o=>s(q)(o))},null,8,["project-info"])):u("",!0)])])],64)),e("div",et,[e("div",{ref_key:"endOfPage",ref:v,class:"v--project-uid__end-page__detector"},null,512)])],2)}}});const ot=L(tt,[["__scopeId","data-v-71fb08ef"]]);export{ot as default};
